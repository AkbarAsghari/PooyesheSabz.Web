@page "/Supports/My"
@attribute [Authorize]

@using PooyesheSabz.Web.Enums

@if (_Supports == null)
{

}
else
{
    <MudDataGrid Items="@_Supports.OrderByDescending(x=> x.CreateDate)">
        <Columns>
            <PropertyColumn Property="x => x.SupportType" Title="نوع حمایت" />
            <PropertyColumn Property="x => x.CreateDate.ToPersianDateTime().EnglishToPersianNumbers()" Title="تاریخ"/>
            <TemplateColumn Title="3 تراکنش های آخر">
                <CellTemplate>
                    @if (@context.Item.Payments != null)
                    {
                        @foreach (var payment in @context.Item.Payments)
                        {
                            <MudStack Row AlignItems="AlignItems.Center">
                                <MudAlert Severity="Severity.Info" NoIcon Dense>
                                    <MudText Typo="Typo.caption">@payment.PaymentStatus</MudText>
                                </MudAlert>
                                <MudText Typo="Typo.caption">مبلغ : @payment.Amount.Separate3Digits().EnglishToPersianNumbers()</MudText>
                            </MudStack>
                        }
                    }
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
}